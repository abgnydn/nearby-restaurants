<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v0.0.0-4192">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-TKMGCBC",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
<link rel="search" type="application/opensearchdescription+xml" title="Capacitor Documentation" href="/docs/opensearch.xml"><title data-react-helmet="true">Building a Capacitor Plugin | Capacitor Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://capacitorjs.com/docs/next/plugins/tutorial/ios-implementation"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Building a Capacitor Plugin | Capacitor Documentation"><meta data-react-helmet="true" name="description" content="Building a Capacitor Plugin - Implementing for iOS"><meta data-react-helmet="true" property="og:description" content="Building a Capacitor Plugin - Implementing for iOS"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/meta/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://capacitorjs.com/docs/next/plugins/tutorial/ios-implementation"><link data-react-helmet="true" rel="alternate" href="https://capacitorjs.com/docs/next/plugins/tutorial/ios-implementation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://capacitorjs.com/docs/next/plugins/tutorial/ios-implementation" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://3IVALO5OU4-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/docs/assets/css/styles.2802178e.css">
<link rel="preload" href="/docs/assets/js/runtime~main.50ab1cf5.js" as="script">
<link rel="preload" href="/docs/assets/js/main.d7343783.js" as="script">
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKMGCBC" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://capacitorjs.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/logos/capacitor-text-docs-light.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="24" width="200"><img src="/docs/logos/capacitor-text-docs-dark.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="24" width="200"></div></a><a class="navbar__item navbar__link" href="/docs/next/">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/plugins">Plugins</a><a class="navbar__item navbar__link" href="/docs/next/cli">CLI</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/next/">v5</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/plugins/tutorial/ios-implementation">v5</a></li><li><a class="dropdown__link" href="/docs/plugins/tutorial/ios-implementation">v4</a></li><li><a class="dropdown__link" href="/docs/v3/plugins/tutorial/ios-implementation">v3</a></li><li><a class="dropdown__link" href="/docs/v2/">v2</a></li></ul></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link navbar__link--community">Community</a><ul class="dropdown__menu"><li><a href="https://ionicframework.com/community" target="_blank" class="dropdown__link"><span>Community Hub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://forum.ionicframework.com/" target="_blank" class="dropdown__link"><span>Forum<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://blog.ionicframework.com/" target="_blank" class="dropdown__link"><span>Blog<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://twitter.com/capacitorjs" target="_blank" class="dropdown__link"><span>Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link navbar__link--support">Support</a><ul class="dropdown__menu"><li><a href="https://ionicframework.com/support" target="_blank" class="dropdown__link"><span>Help Center<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://ionic.zendesk.com/" target="_blank" class="dropdown__link"><span>Customer Support<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://ionicframework.com/advisory" target="_blank" class="dropdown__link"><span>Enterprise Advisory<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div position="right" class="separator"></div><a position="right" class="icon-link navbar__item" href="https://twitter.com/capacitorjs" target="_blank"><img src="/docs/logos/twitter.svg" alt="twitter logo"></a><a position="right" class="icon-link navbar__item" href="https://github.com/ionic-team/capacitor" target="_blank"><img src="/docs/logos/github.svg" alt="github logo"></a><a position="right" class="icon-link navbar__item" href="https://ionic.link/discord" target="_blank"><img src="/docs/logos/discord.svg" alt="discord logo"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link icon-link language navbar__item"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/next/plugins/tutorial/ios-implementation" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="https://capacitorjs.jp/" target="_blank" class="dropdown__link">日本語</a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_GMj9"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_k0Pq"><a href="https://capacitorjs.com" target="_self" rel="noopener noreferrer"><img src="/docs/logos/capacitor-text-docs-light.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="24" width="200"><img src="/docs/logos/capacitor-text-docs-dark.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="24" width="200"></a><div class="sidebar_a3j0 sidebarWithHideableNavbar_VlPv"><a href="https://capacitorjs.com" target="_self" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_hmkv"><img src="/docs/logos/capacitor-text-docs-light.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="24" width="200"><img src="/docs/logos/capacitor-text-docs-dark.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="24" width="200"></a><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Overview</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins">Capacitor Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis">Official Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/community">Community Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/cordova">Cordova Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/enterprise">Enterprise Plugins</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">APIs</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/action-sheet">Action Sheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/app-launcher">App Launcher</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/app">App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/browser">Browser</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/camera">Camera</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/clipboard">Clipboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/cookies">Cookies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/device">Device</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/dialog">Dialog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/filesystem">Filesystem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/geolocation">Geolocation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/google-maps">Google Maps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/haptics">Haptics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/http">Http</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/keyboard">Keyboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/local-notifications">Local Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/motion">Motion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/network">Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/preferences">Preferences</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/push-notifications">Push Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/screen-orientation">Screen Orientation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/screen-reader">Screen Reader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/share">Share</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/splash-screen">Splash Screen</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/status-bar">Status Bar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/text-zoom">Text Zoom</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/apis/toast">Toast</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Creating Plugins</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/creating-plugins">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/workflow">Development Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/ios">iOS Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/android">Android Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/web">Web/PWA Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/method-types">Method Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/configuration-values">Configuration Values</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Plugin Tutorial</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/tutorial/introduction">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/tutorial/designing-the-plugin-api">Designing the Plugin API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/tutorial/using-the-plugin-api">Using the Plugin API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/tutorial/code-abstraction-patterns">Code Abstraction Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/tutorial/web">Implementing for Web/PWA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/plugins/tutorial/ios-implementation">Implementing for iOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/tutorial/android-implementation">Implementing for Android</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/tutorial/packaging-the-plugin">Packaging the Plugin</a></li></ul></li></ul></nav></div></aside><div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://capacitorjs.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/logos/capacitor-text-docs-light.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="24" width="200"><img src="/docs/logos/capacitor-text-docs-dark.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="24" width="200"></div></a><a class="navbar__item navbar__link" href="/docs/next/">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/plugins">Plugins</a><a class="navbar__item navbar__link" href="/docs/next/cli">CLI</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/next/">v5</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/plugins/tutorial/ios-implementation">v5</a></li><li><a class="dropdown__link" href="/docs/plugins/tutorial/ios-implementation">v4</a></li><li><a class="dropdown__link" href="/docs/v3/plugins/tutorial/ios-implementation">v3</a></li><li><a class="dropdown__link" href="/docs/v2/">v2</a></li></ul></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link navbar__link--community">Community</a><ul class="dropdown__menu"><li><a href="https://ionicframework.com/community" target="_blank" class="dropdown__link"><span>Community Hub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://forum.ionicframework.com/" target="_blank" class="dropdown__link"><span>Forum<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://blog.ionicframework.com/" target="_blank" class="dropdown__link"><span>Blog<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://twitter.com/capacitorjs" target="_blank" class="dropdown__link"><span>Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link navbar__link--support">Support</a><ul class="dropdown__menu"><li><a href="https://ionicframework.com/support" target="_blank" class="dropdown__link"><span>Help Center<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://ionic.zendesk.com/" target="_blank" class="dropdown__link"><span>Customer Support<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://ionicframework.com/advisory" target="_blank" class="dropdown__link"><span>Enterprise Advisory<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div position="right" class="separator"></div><a position="right" class="icon-link navbar__item" href="https://twitter.com/capacitorjs" target="_blank"><img src="/docs/logos/twitter.svg" alt="twitter logo"></a><a position="right" class="icon-link navbar__item" href="https://github.com/ionic-team/capacitor" target="_blank"><img src="/docs/logos/github.svg" alt="github logo"></a><a position="right" class="icon-link navbar__item" href="https://ionic.link/discord" target="_blank"><img src="/docs/logos/discord.svg" alt="discord logo"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link icon-link language navbar__item"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/next/plugins/tutorial/ios-implementation" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="https://capacitorjs.jp/" target="_blank" class="dropdown__link">日本語</a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><main class="docMainContainer_Q970"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_MGa7"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Capacitor Documentation<!-- --> <b>v5</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/plugins/tutorial/ios-implementation">latest version</a></b> (<!-- -->v4<!-- -->).</div></div><div class="docItemContainer_PQH2"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->v5</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_psec"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Implementing for iOS</h1></header><p>The decision to implement iOS before Android is arbitrary - in all honesty, you could have written the Android implementation first, then iOS, then web. Or any combination of the three. It just so happens that this tutorial implements iOS before Android.</p><p>You may want to implement the web first because it sits closer to the plugin’s API definition. If any tweaks need to be made to the API, it’s far easier to uncover them while working in the web layer.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="register-the-plugin-with-capacitor">Register the plugin with Capacitor<a aria-hidden="true" class="hash-link" href="#register-the-plugin-with-capacitor" title="Direct link to heading">​</a></h2><blockquote><p><strong>Prerequisite:</strong> Familiarize yourself with the <a href="https://capacitorjs.com/docs/ios/custom-code" target="_blank" rel="noopener noreferrer">Capacitor Custom Native iOS Code documentation</a> before continuing.</p></blockquote><p>Open up the Capacitor application’s iOS project in Xcode by running <code>npx cap open ios</code>. Right-click the <strong>App</strong> group (under the <strong>App</strong> target) and select <strong>New Group</strong> from the context menu. Name this new group <strong>plugins</strong>. Add a new group to <strong>plugins</strong> and name it <strong>ScreenOrientation</strong>.</p><p>Once complete, you&#x27;ll have a path <code>/App/App/plugins/ScreenOrientation/</code>. Add the following files by right-clicking the <strong>ScreenOrientation</strong> group and selecting <strong>New File…</strong> from the context menu:</p><p><code>ScreenOrientation.swift</code>
<code>ScreenOrientationPlugin.swift</code>
<code>ScreenOrientationPlugin.m</code></p><p>If prompted by Xcode to create a Bridging Header, click <strong>Create Bridging Header</strong>.</p><p>Copy the following code into <code>ScreenOrientationPlugin.m</code>:</p><div class="codeBlockContainer_J+bg language-objc"><div class="codeBlockContent_csEI objc"><pre tabindex="0" class="prism-code language-objc codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword">import</span><span class="token macro property"> </span><span class="token macro property expression operator">&lt;</span><span class="token macro property expression">Foundation</span><span class="token macro property expression operator">/</span><span class="token macro property expression">Foundation</span><span class="token macro property expression punctuation">.</span><span class="token macro property expression">h</span><span class="token macro property expression operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword">import</span><span class="token macro property"> </span><span class="token macro property expression operator">&lt;</span><span class="token macro property expression">Capacitor</span><span class="token macro property expression operator">/</span><span class="token macro property expression">Capacitor</span><span class="token macro property expression punctuation">.</span><span class="token macro property expression">h</span><span class="token macro property expression operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token function">CAP_PLUGIN</span><span class="token punctuation">(</span><span class="token plain">ScreenOrientationPlugin</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;ScreenOrientation&quot;</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token function">CAP_PLUGIN_METHOD</span><span class="token punctuation">(</span><span class="token plain">orientation</span><span class="token punctuation">,</span><span class="token plain"> CAPPluginReturnPromise</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token function">CAP_PLUGIN_METHOD</span><span class="token punctuation">(</span><span class="token plain">lock</span><span class="token punctuation">,</span><span class="token plain"> CAPPluginReturnPromise</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token function">CAP_PLUGIN_METHOD</span><span class="token punctuation">(</span><span class="token plain">unlock</span><span class="token punctuation">,</span><span class="token plain"> CAPPluginReturnPromise</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>These Objective-C macros register the plugin with Capacitor, making <code>ScreenOrientationPlugin</code> and its methods available to JavaScript.</p><p>Copy the following code into <code>ScreenOrientationPlugin.swift</code>:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import Foundation</span><br></span><span class="token-line"><span class="token plain">import Capacitor</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">@objc(ScreenOrientationPlugin)</span><br></span><span class="token-line"><span class="token plain">public class ScreenOrientationPlugin: CAPPlugin {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  @objc public func orientation(_ call: CAPPluginCall) {</span><br></span><span class="token-line"><span class="token plain">    call.resolve()</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  @objc public func lock(_ call: CAPPluginCall) {</span><br></span><span class="token-line"><span class="token plain">    call.resolve()</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  @objc public func unlock(_ call: CAPPluginCall) {</span><br></span><span class="token-line"><span class="token plain">    call.resolve();</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note the use of <code>@objc</code> decorators; these are required to make sure Capacitor can see the class and its methods at runtime.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="getting-the-current-screen-orientation">Getting the current screen orientation<a aria-hidden="true" class="hash-link" href="#getting-the-current-screen-orientation" title="Direct link to heading">​</a></h2><p>Let’s tackle the task of getting the current screen orientation first. Open up <code>ScreenOrientation.swift</code> to set up the class and write a method to get the current orientation:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import Foundation</span><br></span><span class="token-line"><span class="token plain">import UIKit</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">public class ScreenOrientation: NSObject {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  public func getCurrentOrientationType() -&gt; String {</span><br></span><span class="token-line"><span class="token plain">    let currentOrientation: UIDeviceOrientation = UIDevice.current.orientation</span><br></span><span class="token-line"><span class="token plain">    return fromDeviceOrientationToOrientationType(currentOrientation)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private func fromDeviceOrientationToOrientationType(_ orientation: UIDeviceOrientation) -&gt; String {</span><br></span><span class="token-line"><span class="token plain">    switch orientation {</span><br></span><span class="token-line"><span class="token plain">    case .landscapeLeft:</span><br></span><span class="token-line"><span class="token plain">      return &quot;landscape-primary&quot;</span><br></span><span class="token-line"><span class="token plain">    case .landscapeRight:</span><br></span><span class="token-line"><span class="token plain">      return &quot;landscape-secondary&quot;</span><br></span><span class="token-line"><span class="token plain">    case .portraitUpsideDown:</span><br></span><span class="token-line"><span class="token plain">      return &quot;portrait-secondary&quot;</span><br></span><span class="token-line"><span class="token plain">    default:</span><br></span><span class="token-line"><span class="token plain">      // Case: portrait</span><br></span><span class="token-line"><span class="token plain">      return &quot;portrait-primary&quot;</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Next, wire up the <code>orientation</code> method in <code>ScreenOrientationPlugin.swift</code> to call the implementation class’s method:</p><div class="codeBlockContainer_J+bg language-Swift"><div class="codeBlockContent_csEI Swift"><pre tabindex="0" class="prism-code language-Swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">@objc(ScreenOrientationPlugin)</span><br></span><span class="token-line"><span class="token plain">public class ScreenOrientationPlugin: CAPPlugin {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private let implementation = ScreenOrientation()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  @objc public func orientation(_ call: CAPPluginCall) {</span><br></span><span class="token-line"><span class="token plain">    let orientationType = implementation.getCurrentOrientationType();</span><br></span><span class="token-line"><span class="token plain">    call.resolve([&quot;type&quot;: orientationType])</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  /* Remaining code omitted for brevity */</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Go ahead and run the app from Xcode, either on an actual device or an iOS simulator. Once it finishes loading, you should see the following logs printed to the console:</p><div class="codeBlockContainer_J+bg language-bash"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">⚡️  To Native -</span><span class="token operator">&gt;</span><span class="token plain">  ScreenOrientation orientation </span><span class="token number">115962915</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">⚡️  TO JS </span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;portrait-primary&quot;</span><span class="token punctuation">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p><strong>Note:</strong> The exact value of the logs will be different for you. In this example, <code>115962915</code> is an arbitrary ID assigned to the method call made from the plugin.</p></blockquote><p>You’ve successfully bridged native iOS code to the web application! 🎉</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="listening-for-screen-orientation-changes">Listening for screen orientation changes<a aria-hidden="true" class="hash-link" href="#listening-for-screen-orientation-changes" title="Direct link to heading">​</a></h2><p>iOS will let us know when a user rotates their device through the <a href="https://developer.apple.com/documentation/foundation/notificationcenter" target="_blank" rel="noopener noreferrer">NotificationCenter</a>, when UIDevice fires the <code>orientationDidChangeNotification</code> event.</p><p>The <code>load()</code> method is the proper place to register an observer for this event. Likewise, the <code>deinit()</code> method is the appropriate place to remove the observer.</p><p>Within the observer registration, we need to provide a method to return the changed orientation to our plugin’s listeners listening for the <code>screenOrientationChange</code> event we defined as part of our plugin’s API. We can reuse the <code>getCurrentOrientationType()</code> method to obtain the changed screen orientation.</p><p>Add the following methods to the <code>ScreenOrientationPlugin</code> class:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">override public func load() {</span><br></span><span class="token-line"><span class="token plain">  NotificationCenter.default.addObserver(</span><br></span><span class="token-line"><span class="token plain">    self,</span><br></span><span class="token-line"><span class="token plain">    selector: #selector(self.orientationDidChange),</span><br></span><span class="token-line"><span class="token plain">    name: UIDevice.orientationDidChangeNotification,</span><br></span><span class="token-line"><span class="token plain">    object: nil)</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">deinit {</span><br></span><span class="token-line"><span class="token plain">  NotificationCenter.default.removeObserver(self)</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">@objc private func orientationDidChange() {</span><br></span><span class="token-line"><span class="token plain">  // Ignore changes in orientation if unknown, face up, or face down</span><br></span><span class="token-line"><span class="token plain">  if(UIDevice.current.orientation.isValidInterfaceOrientation) {</span><br></span><span class="token-line"><span class="token plain">    let orientation = implementation.getCurrentOrientationType()</span><br></span><span class="token-line"><span class="token plain">    notifyListeners(&quot;screenOrientationChange&quot;, data: [&quot;type&quot;: orientation])</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>iOS will detect changes in orientation in three dimensions. As the code comment mentions, we’ll ignore notifying listeners when orientation changes don’t reference landscape or portrait orientations.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="locking-and-unlocking-the-screen-orientation">Locking and unlocking the screen orientation<a aria-hidden="true" class="hash-link" href="#locking-and-unlocking-the-screen-orientation" title="Direct link to heading">​</a></h2><p>iOS doesn’t exactly provide a mechanism to “lock” or “unlock” a screen orientation. Instead, it allows you to set which orientations are allowed programmatically.</p><p>To achieve this, we need to add a method to the <code>AppDelegate</code> class in <code>AppDelegate.swift</code>:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">func application(_ application: UIApplication, supportedInterfaceOrientationsFor window: UIWindow?) -&gt; UIInterfaceOrientationMask {</span><br></span><span class="token-line"><span class="token plain">    return ScreenOrientationPlugin.supportedOrientations</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Notice that the function returns <code>ScreenOrientationPlugin.supportedOrientations</code>. This property doesn’t exist yet, so let’s add it to the <code>ScreenOrientationPlugin</code> class as a private static class member:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">public static var supportedOrientations = UIInterfaceOrientationMask.all</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>By setting up the code above, we tell iOS that we only want to support orientations defined by the value of <code>ScreenOrientationPlugin.supportedOrientations</code>. As you might imagine, the <code>UIInterfaceOrientationMask.all</code> enumeration value supports all orientations. We will pick a more restrictive enumeration value when we write code to lock the screen orientation.</p><p>We’ll need a function that maps an OrientationType to its corresponding UIInterfaceOrientationMask enumeration value. Add the following method to the <code>ScreenOrientation</code> class:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">private func fromOrientationTypeToMask(_ orientationType: String) -&gt; UIInterfaceOrientationMask {</span><br></span><span class="token-line"><span class="token plain">  switch orientationType {</span><br></span><span class="token-line"><span class="token plain">  case &quot;landscape-primary&quot;:</span><br></span><span class="token-line"><span class="token plain">    return UIInterfaceOrientationMask.landscapeLeft</span><br></span><span class="token-line"><span class="token plain">  case &quot;landscape-secondary&quot;:</span><br></span><span class="token-line"><span class="token plain">    return UIInterfaceOrientationMask.landscapeRight</span><br></span><span class="token-line"><span class="token plain">  case &quot;portrait-secondary&quot;:</span><br></span><span class="token-line"><span class="token plain">    return UIInterfaceOrientationMask.portraitUpsideDown</span><br></span><span class="token-line"><span class="token plain">  default:</span><br></span><span class="token-line"><span class="token plain">    // Case: portrait-primary</span><br></span><span class="token-line"><span class="token plain">    return UIInterfaceOrientationMask.portrait</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Forecasting into the future, we will also need a method that maps an OrientationType to an <code>Int</code>, so we’ll add it now into the <code>ScreenOrientation</code> class:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">private func fromOrientationTypeToInt(_ orientationType: String) -&gt; Int {</span><br></span><span class="token-line"><span class="token plain">  switch orientationType {</span><br></span><span class="token-line"><span class="token plain">  case &quot;landscape-primary&quot;:</span><br></span><span class="token-line"><span class="token plain">    return UIInterfaceOrientation.landscapeLeft.rawValue</span><br></span><span class="token-line"><span class="token plain">  case &quot;landscape-secondary&quot;:</span><br></span><span class="token-line"><span class="token plain">    return UIInterfaceOrientation.landscapeRight.rawValue</span><br></span><span class="token-line"><span class="token plain">  case &quot;portrait-secondary&quot;:</span><br></span><span class="token-line"><span class="token plain">    return UIInterfaceOrientation.portraitUpsideDown.rawValue</span><br></span><span class="token-line"><span class="token plain">  default:</span><br></span><span class="token-line"><span class="token plain">    // Case: portrait-primary</span><br></span><span class="token-line"><span class="token plain">    return UIInterfaceOrientation.portrait.rawValue</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now that all the setup is out of the way, we can implement the <code>lock()</code> method. Add the following method to the <code>ScreenOrientation</code> class:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">public func lock(_ orientationType: String, completion: @escaping (UIInterfaceOrientationMask) -&gt; Void) {</span><br></span><span class="token-line"><span class="token plain">  DispatchQueue.main.async {</span><br></span><span class="token-line"><span class="token plain">    let mask = self.fromOrientationTypeToMask(orientationType)</span><br></span><span class="token-line"><span class="token plain">    let orientation = self.fromOrientationTypeToInt(orientationType)</span><br></span><span class="token-line"><span class="token plain">    UIDevice.current.setValue(orientation, forKey: &quot;orientation&quot;)</span><br></span><span class="token-line"><span class="token plain">    UINavigationController.attemptRotationToDeviceOrientation()</span><br></span><span class="token-line"><span class="token plain">    completion(mask)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This is a complicated method; let’s walk through essential parts of it:</p><ol><li><code>completion: @escaping (UIInterfaceOrientationMask) -&gt; Void</code> tells callers of this method that they must provide a function that will be called when the method finishes execution, and we will pass the function an <code>UIInterfaceOrientationMask</code> value, by way of <code>completion(mask)</code>.</li><li><code>UIDevice.current.setValue(orientation, forKey: &quot;orientation&quot;)</code> sets a screen orientation for the device, but does not rotate the screen to it.</li><li><code>UINavigationController.attemptRotationToDeviceOrientation()</code> will attempt to rotate the application to the screen orientation set in the previous line of code.</li><li>We wrap the code in <code>DispatchQueue.main.async</code> to prevent blocking the UI thread.</li></ol><p>This method needs to get called from the <code>ScreenOrientationPlugin</code> class, and afterward, update <code>ScreenOrientationPlugin.supportedOrientations</code> so iOS knows we only want to support one specific screen orientation at this time:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">​​@objc public func lock(_ call: CAPPluginCall) {</span><br></span><span class="token-line"><span class="token plain">  guard let lockToOrientation = call.getString(&quot;orientation&quot;) else {</span><br></span><span class="token-line"><span class="token plain">    call.reject(&quot;Input option &#x27;orientation&#x27; must be provided.&quot;)</span><br></span><span class="token-line"><span class="token plain">    return</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">  implementation.lock(lockToOrientation, completion: { (mask) -&gt; Void in</span><br></span><span class="token-line"><span class="token plain">    ScreenOrientationPlugin.supportedOrientations = mask;</span><br></span><span class="token-line"><span class="token plain">    call.resolve()</span><br></span><span class="token-line"><span class="token plain">  })</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>lock()</code> method also introduces a guard to prevent anyone from calling it without an <code>orientation</code> input parameter. It’s best practice to reject any calls to plugin methods that are missing any required input parameters.</p><p>To unlock the screen orientation, we walk back the steps we took the lock it. Add the following method to the <code>ScreenOrientation</code> class:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">public func unlock(completion: @escaping () -&gt; Void) {</span><br></span><span class="token-line"><span class="token plain">  DispatchQueue.main.async {</span><br></span><span class="token-line"><span class="token plain">    let unknownOrientation = UIInterfaceOrientation.unknown.rawValue</span><br></span><span class="token-line"><span class="token plain">    UIDevice.current.setValue(unknownOrientation, forKey: &quot;orientation&quot;)</span><br></span><span class="token-line"><span class="token plain">    UINavigationController.attemptRotationToDeviceOrientation()</span><br></span><span class="token-line"><span class="token plain">    completion()</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>By setting the current orientation value to <code>UIInterfaceOrientation.unknown</code>, iOS attempts to auto-correct its orientation. In the <code>ScreenOrientationPlugin</code> class, we’ll revert <code>supportedOrientations</code> to <code>UIInterfaceOrientationMask.all</code>:</p><div class="codeBlockContainer_J+bg language-swift"><div class="codeBlockContent_csEI swift"><pre tabindex="0" class="prism-code language-swift codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">@objc public func unlock(_ call: CAPPluginCall) {</span><br></span><span class="token-line"><span class="token plain">  implementation.unlock {</span><br></span><span class="token-line"><span class="token plain">    ScreenOrientationPlugin.supportedOrientations = UIInterfaceOrientationMask.all</span><br></span><span class="token-line"><span class="token plain">    call.resolve()</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="give-it-a-test-drive">Give it a test drive!<a aria-hidden="true" class="hash-link" href="#give-it-a-test-drive" title="Direct link to heading">​</a></h2><p>In Xcode, run the app on either a device or a simulator. The plugin functions as intended! Pressing the “Rotate My Device” button will rotate the screen orientation into landscape mode, and if you rotate further, you will see that the screen orientation is locked. Pressing “Confirm Signature“ will unlock the screen orientation.</p><p>The penultimate step to this tutorial is: the Android implementation.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ionic-team/capacitor-docs/edit/main/docs/plugins/tutorial/implementing-for-ios.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-edit iconEdit_PItR"><path d="M7 0C3.13438 0 0 3.21563 0 7.17813C0 10.35 2.00625 13.0375 4.7875 13.9875C4.83125 13.9969 4.86875 14 4.90625 14C5.16563 14 5.26562 13.8094 5.26562 13.6438C5.26562 13.4719 5.25938 13.0219 5.25625 12.4219C4.99375 12.4812 4.75938 12.5063 4.55 12.5063C3.20313 12.5063 2.89687 11.4594 2.89687 11.4594C2.57812 10.6313 2.11875 10.4094 2.11875 10.4094C1.50938 9.98125 2.11562 9.96875 2.1625 9.96875H2.16563C2.86875 10.0312 3.2375 10.7125 3.2375 10.7125C3.5875 11.325 4.05625 11.4969 4.475 11.4969C4.80312 11.4969 5.1 11.3906 5.275 11.3094C5.3375 10.8469 5.51875 10.5312 5.71875 10.35C4.16563 10.1688 2.53125 9.55313 2.53125 6.80312C2.53125 6.01875 2.80312 5.37813 3.25 4.87813C3.17812 4.69688 2.9375 3.96563 3.31875 2.97813C3.31875 2.97813 3.36875 2.9625 3.475 2.9625C3.72812 2.9625 4.3 3.05937 5.24375 3.71562C5.80312 3.55625 6.4 3.47812 6.99687 3.475C7.59062 3.47812 8.19063 3.55625 8.75 3.71562C9.69375 3.05937 10.2656 2.9625 10.5188 2.9625C10.625 2.9625 10.675 2.97813 10.675 2.97813C11.0563 3.96563 10.8156 4.69688 10.7437 4.87813C11.1906 5.38125 11.4625 6.02187 11.4625 6.80312C11.4625 9.55937 9.825 10.1656 8.26562 10.3438C8.51562 10.5656 8.74063 11.0031 8.74063 11.6719C8.74063 12.6313 8.73125 13.4062 8.73125 13.6406C8.73125 13.8094 8.82812 14 9.0875 14C9.125 14 9.16875 13.9969 9.2125 13.9875C11.9969 13.0375 14 10.3469 14 7.17813C14 3.21563 10.8656 0 7 0Z" fill="currentColor"></path></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/plugins/tutorial/web"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Implementing for Web/PWA</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/plugins/tutorial/android-implementation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Implementing for Android<!-- --> »</div></a></div></nav></div><div class="spacer"></div></div><div class="end"><div class="toc-wrapper"><h2>Contents</h2><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#register-the-plugin-with-capacitor" class="table-of-contents__link toc-highlight">Register the plugin with Capacitor</a></li><li><a href="#getting-the-current-screen-orientation" class="table-of-contents__link toc-highlight">Getting the current screen orientation</a></li><li><a href="#listening-for-screen-orientation-changes" class="table-of-contents__link toc-highlight">Listening for screen orientation changes</a></li><li><a href="#locking-and-unlocking-the-screen-orientation" class="table-of-contents__link toc-highlight">Locking and unlocking the screen orientation</a></li><li><a href="#give-it-a-test-drive" class="table-of-contents__link toc-highlight">Give it a test drive!</a></li></ul></div><a href="https://github.com/ionic-team/capacitor-docs/edit/main/docs/plugins/tutorial/implementing-for-ios.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-edit iconEdit_PItR"><path d="M7 0C3.13438 0 0 3.21563 0 7.17813C0 10.35 2.00625 13.0375 4.7875 13.9875C4.83125 13.9969 4.86875 14 4.90625 14C5.16563 14 5.26562 13.8094 5.26562 13.6438C5.26562 13.4719 5.25938 13.0219 5.25625 12.4219C4.99375 12.4812 4.75938 12.5063 4.55 12.5063C3.20313 12.5063 2.89687 11.4594 2.89687 11.4594C2.57812 10.6313 2.11875 10.4094 2.11875 10.4094C1.50938 9.98125 2.11562 9.96875 2.1625 9.96875H2.16563C2.86875 10.0312 3.2375 10.7125 3.2375 10.7125C3.5875 11.325 4.05625 11.4969 4.475 11.4969C4.80312 11.4969 5.1 11.3906 5.275 11.3094C5.3375 10.8469 5.51875 10.5312 5.71875 10.35C4.16563 10.1688 2.53125 9.55313 2.53125 6.80312C2.53125 6.01875 2.80312 5.37813 3.25 4.87813C3.17812 4.69688 2.9375 3.96563 3.31875 2.97813C3.31875 2.97813 3.36875 2.9625 3.475 2.9625C3.72812 2.9625 4.3 3.05937 5.24375 3.71562C5.80312 3.55625 6.4 3.47812 6.99687 3.475C7.59062 3.47812 8.19063 3.55625 8.75 3.71562C9.69375 3.05937 10.2656 2.9625 10.5188 2.9625C10.625 2.9625 10.675 2.97813 10.675 2.97813C11.0563 3.96563 10.8156 4.69688 10.7437 4.87813C11.1906 5.38125 11.4625 6.02187 11.4625 6.80312C11.4625 9.55937 9.825 10.1656 8.26562 10.3438C8.51562 10.5656 8.74063 11.0031 8.74063 11.6719C8.74063 12.6313 8.73125 13.4062 8.73125 13.6406C8.73125 13.8094 8.82812 14 9.0875 14C9.125 14 9.16875 13.9969 9.2125 13.9875C11.9969 13.0375 14 10.3469 14 7.17813C14 3.21563 10.8656 0 7 0Z" fill="currentColor"></path></svg>Edit this page</a></div></div></div></div></main></div></div></div></div>
<script src="/docs/assets/js/runtime~main.50ab1cf5.js"></script>
<script src="/docs/assets/js/main.d7343783.js"></script>
</body>
</html>